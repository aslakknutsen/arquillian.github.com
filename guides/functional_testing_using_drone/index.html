<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Functional Testing using Drone &#183; Arquillian Guides</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Discover how Arquillian Drone simplifies the use of Selenium 2 to test the web UI of your application." name="description" />
    <link href="/blog/atom.xml" rel="alternate" title="Arquillian blog Atom feed" type="application/atom+xml" />
    <link href="/stylesheets/screen.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">
            <span class="logo"></span>
            <span class="name">Arquillian</span>
          </a>
          <nav class="nav-collapse" role="navigation">
            <ul class="nav">
              <li><a href="/invasion/">Invasion!</a></li>
              <li><a href="/features/">Features</a></li>
              <li class="active"><a href="/guides/">Guides</a></li>
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/community/">Community</a></li>
              <li><a href="/code/">Code</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div id="main" role="main">
  <div id="content-header">
    <div class="container">
      <div class="headline">
        <h1>
          <a href="/guides/">Arquillian Guides</a>
          <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
        </h1>
        <div class="directory">
          <a class="guides_menu" href="./" id="guides_menu">
            Guides Index
            <i class="icon-menu-closed"></i>
          </a>
          <div id="guides" style="display: none">
            <a class="guides_menu" href="./">
              Guides Index
              <i class="icon-menu-open"></i>
            </a>
            <hr class="clear" />
            <dl class="beg">
              <dt>First Steps</dt>
              <dd><a href="/guides/getting_started/">Getting Started</a>
              <br />
              <a href="/guides/getting_started/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
              <a href="/guides/getting_started_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
              <a href="/guides/getting_started_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
              <a href="/guides/getting_started_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
              <a href="/guides/getting_started_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
              <a href="/guides/getting_started_nl/"><img class="flag" rel="tooltip" src="/images/flags/nl.png" title="Nederlands (nl)" /></a>
              <a href="/guides/getting_started_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
              <a href="/guides/getting_started_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
              <a href="/guides/getting_started_sv_se/"><img class="flag" rel="tooltip" src="/images/flags/sv_se.png" title="Svenska (sv_se)" /></a>
              <a href="/guides/getting_started_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
              <dd><a href="/guides/getting_started_rinse_and_repeat/">Getting Started: Rinse and Repeat</a>
              <br />
              <a href="/guides/getting_started_rinse_and_repeat/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
              <a href="/guides/getting_started_rinse_and_repeat_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
              <dd><a href="/guides/get_started_faster_with_forge/">Get Started Faster with Forge</a>
              <br />
              <a href="/guides/get_started_faster_with_forge/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
              <a href="/guides/get_started_faster_with_forge_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
              <a href="/guides/get_started_faster_with_forge_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
              <a href="/guides/get_started_faster_with_forge_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
              <dd><a href="/guides/shrinkwrap_introduction/">Creating Deployable Archives with ShrinkWrap</a></dd>
            </dl>
            <dl class="int">
              <dt>More Coverage</dt>
              <dd><a href="/guides/testing_java_persistence/">Testing Java Persistence</a>
              <br />
              <a href="/guides/testing_java_persistence/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
              <a href="/guides/testing_java_persistence_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a></dd>
              <dd><a href="/guides/functional_testing_using_drone/">Functional Testing using Drone</a></dd>
            </dl>
            <dl class="adv">
              <dt>Enhance</dt>
              <dd><a href="/guides/testing_in_the_cloud/">Testing in the Cloud</a></dd>
            </dl>
            <dl class="ref">
              <dt>Reference</dt>
              <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Reference Guide</a></dd>
              <dd><a href="http://docs.jboss.org/arquillian/api/latest">API Docs</a>,
              <a href="http://docs.jboss.org/arquillian/spi/latest">SPI Docs</a></dd>
              <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
              <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
            </dl>
          </div>
        </div>
        <script>$(function() { activateGuideMenuControl() })</script>
      </div>
    </div>
  </div>
  <div class="container" id="guide">
    <div id="content">
            <div class="header">
              <div class="header">
              <h2>Functional Testing using Drone</h2>
              <div class="authors"><strong>Authors:</strong>
   <a href="https://community.jboss.org/people/dan.j.allen">Dan Allen</a>, <a href="https://community.jboss.org/people/kpiwko">Karel Piwko</a>
  <br />
  <strong>Level:</strong>
   More Coverage
  <strong style="padding-left: 10px;">Tags:</strong>
   drone, selenium, as7, cdi, solder
  <strong style="padding-left: 10px;">Last Update:</strong> May 24, 2012</div>
              <p>This guide introduces you to the Arquillian Drone extension. After reading this guide, you&#8217;ll be able to:</p>
              <ul>
	<li>Add the Drone extension to your Arquillian-based test suite to activate Selenium 2</li>
	<li>Package portions of your web application to test the web user interface (UI)</li>
	<li>Inject the DefaultSelenium API into your test case</li>
	<li>Control the browser using Selenium to validate the behavior of your web application</li>
</ul>
              <p>You&#8217;ll appreciate how much heavy lifting Arquillian is doing to simplify the task of using Selenium 2 to perform automated functional testing!</p>
              </div>
              </div>
            <h3 id="assumptions">Assumptions</h3>
<p>We&#8217;ll assume that you&#8217;ve read the <a href="/guides/getting_started">Getting Started</a> guide and have an Arquillian test suite setup in your project. We&#8217;ll be adding a simple <acronym title="JavaServer Faces">JSF</acronym> login form to the project as an example of a web UI to test. From there, you can apply these instructions to any other web pages you may need to test.</p>
<p>The instructions in this guide are specific to a Maven project, though remember that Arquillian is not tied to Maven in any way. We&#8217;ll be running the tests on a JBoss AS 7 instance, though you can use any container supported by Arquillian that has a web container.</p>
<p>In this guide, we&#8217;ll be using the following technologies:</p>
<ul>
	<li>Arquillian</li>
	<li>Arquillian Drone</li>
	<li>ShrinkWrap Maven Resolver</li>
	<li>Selenium (Selenium Server and DefaultSelenium)</li>
</ul>
<p>The first three technologies are a part of Arquillian test platform. The final technology, <a href="http://seleniumhq.org">Selenium</a>, automates browsers. Selenium integrates into Arquillian via the Arquillian Drone extension to test the frontend of Java-based web applications.</p>
<p>We&#8217;ll be using two parts of Selenium:</p>
<ol>
	<li>Selenium Server is a test tool that allows you to write automated web application UI tests against any HTTP website using any mainstream JavaScript-enabled browser.</li>
	<li>DefaultSelenium is the Java client API that you use to control the browser.</li>
</ol>
<p>If you are already familiar with Selenium, you&#8217;ll discover that Arquillian manages the Selenium Server life cycle in much the same way it manages the container life cycle. If Selenium is new to you, this is a great opportunity to begin using it to test the web UI of your application without having to worry about how it&#8217;s setup.</p>
<h3 id="introducing_client_mode">Introducing Client Mode</h3>
<p>If you&#8217;d ever written an Arquillian based test, you know that it looks almost the same as a unit test for the unit testing framework you are using. Let&#8217;s look at an example of an Arquillian test that uses JUnit:</p>
<pre class="prettify"><code class="prettify">@RunWith(Arquillian.class)&#x000A;public class BasicInContainerTest {&#x000A;    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class)&#x000A;            .addClass(MyBean.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @Inject&#x000A;    MyBean bean;</code>&#x000A; &#x000A;<code class="prettify">    @Test&#x000A;    public void should_inject_bean_instance() {&#x000A;        Assert.assertNotNull(bean);&#x000A;    }&#x000A;}</code></pre>
<p>Here we&#8217;ve deployed a CDI bean to the server inside a bean archive. In the test, we&#8217;ve injected the instance of the bean, then asserted that the injection has occurred. Arquillian first enriches the archive with the test infrastructure. It then connects to the server to deploy the archive and execute the test method inside of the container by launching the JUnit test runner a second time inside that environment. Finally, Arquillian retrieves the results from that remote execution. This example demonstrates the default run mode of Arquillian: in-container. In a sense, the local JUnit runner is a client of the container, being driven by Arquillian.</p>
<p>The other run mode in Arquillian is the client run mode. In this mode, Arquillian deploys the test archive as is to the server. It then allows the tests to run in the same JVM as the test runner. Now your test case is a client of the container. The test no longer runs inside the container, yet Arquillian still handles the life cycle of the container as well as deployment of the test archive. It&#8217;s the ideal mode for web UI testing.</p>
<h3 id="enabling_client_mode">Enabling Client Mode</h3>
<p>How do you activate client mode? Quite simply. You either mark a deployment as non-testable, meaning Arquillian will not enrich the archive, or you can mark a specified method with the annotation <code>@RunAsClient</code>. Here&#8217;s an example:</p>
<pre class="prettify"><code class="prettify">@RunWith(Arquillian.class)&#x000A;public class BasicClientTest {&#x000A;    @Deployment(testable = false)&#x000A;    public static WebArchive createDeployment() {&#x000A;        return ShrinkWrap.create(WebArchive.class)&#x000A;            .addClasses(MyBean.class)&#x000A;            .setWebXML("WEB-INF/web.xml");&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @Test&#x000A;    public void should_login_successfully() {&#x000A;    }&#x000A;}</code></pre>
<p>It&#8217;s also possible to mix in-container and client modes in the same test! Just leave off the <code>testable</code> attribute. Any method annotated with <code>@RunAsClient</code> will execute from the client, the remainder will execute inside the container, giving you the best of both worlds!</p>
<pre class="prettify"><code class="prettify">@RunWith(Arquillian.class)&#x000A;public class MixedRunModeTest {&#x000A;    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class)&#x000A;            .addClass(MyBean.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @Inject&#x000A;    MyBean bean;</code>&#x000A; &#x000A;<code class="prettify">    @Test&#x000A;    public void should_run_in_container() {&#x000A;        // executed from the server JVM&#x000A;        Assert.assertNotNull(bean);&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    @RunAsClient&#x000A;    public void should_run_as_client() {&#x000A;        // executed from the client JVM&#x000A;    }&#x000A;}</code></pre>
<p>Now that you understand how to run a test in client mode, let&#8217;s check out how to test a web UI by using Arquillian to drive Selenium.</p>
<h3 id="drone_overview">Drone Overview</h3>
<p>Arquillian Drone is an extension that manages the life cycle of testing browsers for the purpose of simplifying automated functional testing.</p>
<p>Currently, the list of supported browsers is pretty large, a bounded set of those covered by Selenium Server, Selenium Core, Selenium WebDriver and Arquillian Graphene. Like Arquillian Core, the Arquillian Drone extension is, well, pretty extensible. If your favorite browser is not supported, you&#8217;ll find it easy to add the support.</p>
<p>Arquillian Drone bootstraps the tooling required for testing browsers in order to work (e.g. Selenium Server), than it creates instances of a testing browser and properly disposes of it after the test is finished. <em>You only have to worry about writing the logic of the test.</em></p>
<p>Let&#8217;s get Arquillian Drone configured so that we can start writing some tests.</p>
<h3 id="set_up_drone">Set Up Drone</h3>
<p>Let&#8217;s start by setting up the libraries in the Maven pom.xml file that we need to use the Drone extension. As with the previous tutorials, we need to instruct Maven which versions of the artifacts to use by importing a <acronym title="Bill of Materials">BOM</acronym>, or version matrix. If you followed the getting started guide, you should already have a BOM defined for Arquillian in the <code>&lt;dependencyManagement&gt;</code> section.</p>
<div class="filename">pom.xml</div>
<pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-bom&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.Final&lt;/version&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;            &lt;scope&gt;import&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/dependencyManagement&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
<p>Below that <code>&lt;dependency&gt;</code>, add another entry for defining the version matrix for Drone&#8217;s transitive dependencies, leaving you with the following result:</p>
<div class="filename">pom.xml</div>
<pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-bom&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.Final&lt;/version&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;            &lt;scope&gt;import&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-drone-bom&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.Final&lt;/version&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;            &lt;scope&gt;import&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/dependencyManagement&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
<p>Next, we need to define the Drone dependencies inside the top-level <code>&lt;dependencies&gt;</code> element. If you&#8217;ve set up Arquillian previously, you should already have the JUnit and Arquillian JUnit integration dependencies.</p>
<div class="filename">pom.xml</div>
<pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencies&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;version&gt;4.8.1&lt;/version&gt;&#x000A;    &lt;/dependency&gt;&#x000A;&lt;/dependencies&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
<p>Insert the following group of <code>&lt;dependency&gt;</code> elements below the existing dependencies to add the Drone extension, Selenium adapter and Selenium runtime to your project&#8217;s test classpath:</p>
<div class="filename">pom.xml</div>
<pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-drone-impl&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-drone-selenium&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.extension&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-drone-selenium-server&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;selenium-server&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;exclusions&gt;&#x000A;        &lt;exclusion&gt;&#x000A;            &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;servlet-api-2.5&lt;/artifactId&gt;&#x000A;        &lt;/exclusion&gt;&#x000A;    &lt;/exclusions&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt; &#x000A;&lt;!-- clip --&gt;</code></pre>
<p class="info"><span>Feel free to select the SLF4J implementation of your choosing.</span></p>
<p>Finally, you have to specify the dependency on container adapter. We&#8217;ll use the JBoss AS 7 managed container since it boots extremely fast!</p>
<div class="filename">pom.xml</div>
<pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;jboss-as-arquillian-container-managed&lt;/artifactId&gt;&#x000A;    &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
<p class="important"><span>If you are testing against multiple containers, then the container adapter should be included in a dedicated profile, as described in the <a href="/guides/getting_started">Getting Started</a> guide.</span></p>
<p>While the Drone extension appears to require a lot of dependencies, take comfort that this is the only configuration you need to do to use it. Now you&#8217;re ready to write your first Arquillian Drone test!</p>
<h3 id="create_a_login_screen">Create a Login Screen</h3>
<p>When writing a web UI test, you have to make sure you deploy a complete web application, even if it&#8217;s only a fraction of your full application (e.g., a micro application). Therefore, the <code>@Deployment</code> method for these types of tests is going to be a bit more complex, but don&#8217;t let it turn you off. Over time, you&#8217;ll divide up the deployment into reusable parts to trim down the configuration on a per-test basis.</p>
<p>To create the login screen of the application, we need the following files and resources:</p>
<ol>
	<li>Credentials bean to capture the username and password</li>
	<li>User bean to represent the current user</li>
	<li>Login controller to authenticate the user and produce the current user</li>
	<li>Login page</li>
	<li>Home page (landing page after successful login)</li>
</ol>
<p>If you haven&#8217;t done so already, open the project in your IDE. Next, create a <code>Credentials</code> class in the <code>org.arquillian.example</code> package.</p>
<div class="filename">src/main/java/org/arquillian/example/Credentials.java</div>
<pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import javax.enterprise.inject.Model;</code>&#x000A;&#x000A;<code class="prettify">@Model&#x000A;public class Credentials {&#x000A;    private String username;&#x000A;    private String password;</code>&#x000A;&#x000A;<code class="prettify">    public String getUsername() {&#x000A;        return username;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public void setUsername(String username) {&#x000A;        this.username = username;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public String getPassword() {&#x000A;        return password;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public void setPassword(String password) {&#x000A;        this.password = password;&#x000A;    }&#x000A;}</code></pre>
<p><code>Credentials</code> is a request-scoped, named bean (as indicated by the <code>@Model</code> stereotype annotation) to make it capable of capturing data from the JSF login form we are going to create.</p>
<p>Next, create the <code>User</code> class in the same package. In a more advanced example, this class would likely serve as a JPA entity, able to retrieve the user&#8217;s information from a database. For now, we&#8217;ll stick with a more basic use case.</p>
<div class="filename">src/main/java/org/arquillian/example/User.java</div>
<pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">public class User {&#x000A;    private String username;</code>&#x000A;&#x000A;<code class="prettify">    public User() {}</code>&#x000A;    &#x000A;<code class="prettify">    public User(String username) {&#x000A;        this.username = username;&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    public String getUsername() {&#x000A;        return username;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public void setUsername(String username) {&#x000A;        this.username = username;&#x000A;    }&#x000A;}</code></pre>
<p>Next up, create the <code>LoginController</code> class, again in the same package. For the purpose of this example, this implementation only accepts a username and password of &#8220;demo&#8221; and issues a welcome message when the login is successful.</p>
<div class="filename">src/main/java/org/arquillian/example/LoginController.java</div>
<pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.Serializable;</code>&#x000A;&#x000A;<code class="prettify">import javax.enterprise.context.SessionScoped;&#x000A;import javax.enterprise.inject.Produces;&#x000A;import javax.faces.application.FacesMessage;&#x000A;import javax.faces.context.FacesContext;&#x000A;import javax.inject.Inject;&#x000A;import javax.inject.Named;</code>&#x000A;&#x000A;<code class="prettify">@Named&#x000A;@SessionScoped&#x000A;public class LoginController implements Serializable {&#x000A;    private static final long serialVersionUID = 1L;</code>&#x000A;&#x000A;<code class="prettify">    private static final String SUCCESS_MESSAGE = "Welcome";&#x000A;    private static final String FAILURE_MESSAGE =&#x000A;        "Incorrect username and password combination";</code>&#x000A;&#x000A;<code class="prettify">    private User currentUser;</code>&#x000A;    &#x000A;<code class="prettify">    @Inject&#x000A;    private Credentials credentials;</code>&#x000A;    &#x000A;<code class="prettify">    public String login() {&#x000A;        if ("demo".equals(credentials.getUsername()) &amp;&amp;&#x000A;            "demo".equals(credentials.getPassword())) {&#x000A;            currentUser = new User("demo");&#x000A;            FacesContext.getCurrentInstance().addMessage(null,&#x000A;                new FacesMessage(SUCCESS_MESSAGE));&#x000A;            return "home.xhtml";&#x000A;        }</code>&#x000A;&#x000A;<code class="prettify">        FacesContext.getCurrentInstance().addMessage(null,&#x000A;            new FacesMessage(FacesMessage.SEVERITY_WARN,&#x000A;                FAILURE_MESSAGE, FAILURE_MESSAGE));&#x000A;        return null;&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    public boolean isLoggedIn() {&#x000A;        return currentUser != null;&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @Produces&#x000A;    public User getCurrentUser() {&#x000A;        return currentUser;&#x000A;    }&#x000A;}</code></pre>
<p>The <code>LoginController</code> is session-scoped so that it can store the current user for the duration of the user&#8217;s session and named so that it can be accessed by the action button on the login form.</p>
<p>Finally, we need to create the UI screens. In the <code>src/main/webapp</code> directory, create a login page:</p>
<div class="filename">src/main/webapp/login.xhtml</div>
<pre class="prettify"><code class="prettify">&lt;!DOCTYPE html&gt;&#x000A;&lt;html xmlns="http://www.w3.org/1999/xhtml"&#x000A;    xmlns:ui="http://java.sun.com/jsf/facelets"&#x000A;    xmlns:h="http://java.sun.com/jsf/html"&#x000A;    xmlns:f="http://java.sun.com/jsf/core"&gt;&#x000A;    &lt;head&gt;&#x000A;        &lt;title&gt;Log in&lt;/title&gt;&#x000A;    &lt;/head&gt;&#x000A;    &lt;body&gt;&#x000A;        &lt;h:messages/&gt;&#x000A;        &lt;h:form id="loginForm"&gt;&#x000A;            &lt;h:panelGrid columns="2"&gt;&#x000A;                &lt;h:outputLabel for="username"&gt;Username:&lt;/h:outputLabel&gt;&#x000A;                &lt;h:inputText id="username" value="#{credentials.username}"/&gt;&#x000A;                &lt;h:outputLabel for="password"&gt;Password:&lt;/h:outputLabel&gt;&#x000A;                &lt;h:inputSecret id="password" value="#{credentials.password}"/&gt;&#x000A;                &lt;h:commandButton id="login" value="Log in"&#x000A;                    action="#{loginController.login}"/&gt;&#x000A;            &lt;/h:panelGrid&gt;&#x000A;        &lt;/h:form&gt;&#x000A;    &lt;/body&gt;&#x000A;&lt;/html&gt;</code></pre>
<p>and a home page:</p>
<div class="filename">src/main/webapp/home.xhtml</div>
<pre class="prettify"><code class="prettify">&lt;!DOCTYPE html&gt;&#x000A;&lt;html xmlns="http://www.w3.org/1999/xhtml"&#x000A;    xmlns:ui="http://java.sun.com/jsf/facelets"&#x000A;    xmlns:h="http://java.sun.com/jsf/html"&#x000A;    xmlns:f="http://java.sun.com/jsf/core"&gt;&#x000A;    &lt;head&gt;&#x000A;        &lt;title&gt;Home&lt;/title&gt;&#x000A;    &lt;/head&gt;&#x000A;    &lt;body&gt;&#x000A;        &lt;h:messages/&gt;&#x000A;        &lt;h:panelGroup rendered="#{loginController.loggedIn}"&gt;&#x000A;            &lt;p&gt;You are signed in as #{currentUser.username}.&lt;/p&gt;&#x000A;        &lt;/h:panelGroup&gt;&#x000A;    &lt;/body&gt;&#x000A;&lt;/html&gt;</code></pre>
<p>Now we need to write a test to see if these components come together to produce a functioning login screen.</p>
<h3 id="create_a_test_archive">Create a Test Archive</h3>
<p>Here&#8217;s the shell of a test case for testing the logic screen with just the <code>@Deployment</code> method in place. All the files all listed explicitly to illustrate what&#8217;s being included.</p>
<div class="filename">src/test/java/org/arquillian/example/LoginScreenSeleniumTest.java</div>
<pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.File;&#x000A;import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.asset.StringAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.WebArchive;&#x000A;import org.junit.Assert;&#x000A;import org.junit.Test;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class LoginScreenSeleniumTest {&#x000A;    private static final String WEBAPP_SRC = "src/main/webapp";</code>&#x000A;    &#x000A;<code class="prettify">    @Deployment(testable = false)&#x000A;    public static WebArchive createDeployment() {&#x000A;        return ShrinkWrap.create(WebArchive.class, "login.war")&#x000A;            .addClasses(Credentials.class, User.class, LoginController.class)&#x000A;            .addAsWebResource(new File(WEBAPP_SRC, "login.xhtml"))&#x000A;            .addAsWebResource(new File(WEBAPP_SRC, "home.xhtml"))&#x000A;            .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml")&#x000A;            .addAsWebInfResource(&#x000A;                new StringAsset("&lt;faces-config version=\"2.0\"/&gt;"),&#x000A;                "faces-config.xml");&#x000A;    }&#x000A;}</code></pre>
<p class="important"><span>If you encounter a java.lang.ClassNotFoundException: com.thoughtworks.selenium.DefaultSelenium when you run the test, likely you don&#8217;t have the <code>testable = false</code> attribute on the <code>@Deployment</code> annotation. Don&#8217;t forget it!</span></p>
<p class="warning"><span>The Java EE 6 specification requires a <code>faces-config.xml</code> descriptor to be present in WEB-INF to activate JSF. Unlike <code>beans.xml</code>, however, the <code>faces-config.xml</code> descriptor cannot be an empty file. It must contain at least the root node and the version attribute to specify the JSF version in use.</span></p>
<p>If you have a lot of web pages that are part of the test, having to add them to the archive individually is tedious. Instead, you can import them in bulk using the <code>ExplodedImporter</code> from ShrinkWrap. Here&#8217;s an example of how to add all the web sources that end in .xhtml to the archive:</p>
<div class="filename">src/test/java/org/arquillian/example/LoginScreenSeleniumTest.java</div>
<pre class="prettify"><code class="prettify">// clip&#x000A;import org.jboss.shrinkwrap.api.Filters;&#x000A;import org.jboss.shrinkwrap.api.GenericArchive;&#x000A;import org.jboss.shrinkwrap.api.importer.ExplodedImporter;&#x000A;// clip</code>&#x000A;&#x000A;<code class="prettify">return ShrinkWrap.create(WebArchive.class, "login.war")&#x000A;    .addClasses(Credentials.class, User.class, LoginController.class)&#x000A;    .merge(ShrinkWrap.create(GenericArchive.class).as(ExplodedImporter.class)&#x000A;        .importDirectory(WEBAPP_SRC).as(GenericArchive.class),&#x000A;        "/", Filters.include(".*\\.xhtml$"))&#x000A;    .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml")&#x000A;    .addAsWebInfResource(&#x000A;        new StringAsset("&lt;faces-config version=\"2.0\"/&gt;"),&#x000A;        "faces-config.xml");</code>&#x000A;&#x000A;<code class="prettify">// clip</code></pre>
<p>For more information about how to use <code>ExplodedImporter</code> for this task, and alternative strategies, see <a href="https://community.jboss.org/wiki/HowDoIAddAllWebResourcesToTheShrinkWrapArchive">this FAQ</a>.</p>
<p>One way to trim this down is to move the creation of the archive to a utility class and refer to it whenever you need this particular micro application. That leaves you with a much simpler <code>@Deployment</code> method:</p>
<div class="filename">src/test/java/org/arquillian/example/LoginScreenSeleniumTest.java</div>
<pre class="prettify"><code class="prettify">// clip&#x000A;@RunWith(Arquillian.class)&#x000A;public class LoginScreenSeleniumTest {&#x000A;    @Deployment(testable = false)&#x000A;    public static WebArchive createDeployment() {&#x000A;        return Deployments.createLoginScreenDeployment();&#x000A;    }&#x000A;}</code></pre>
<p>Now let&#8217;s get a handle on Selenium.</p>
<h3 id="inject_the_selenium_driver">Inject the Selenium Driver</h3>
<p>Earlier, we added Selenium, Selenium Server and the corresponding Drone integration libraries to the pom.xml. That&#8217;s the only step required to setup Selenium when using Arquillian. All that&#8217;s left is to inject the <a href="http://selenium.googlecode.com/svn/tags/selenium-2.13.0/docs/api/java/com/thoughtworks/selenium/DefaultSelenium.html">DefaultSelenium</a> API into your test case.</p>
<div class="filename">src/test/java/org/arquillian/example/LoginScreenSeleniumTest.java</div>
<pre class="prettify"><code class="prettify">// clip&#x000A;import org.jboss.arquillian.drone.api.annotation.Drone;&#x000A;import com.thoughtworks.selenium.DefaultSelenium;&#x000A;// clip</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class LoginScreenSeleniumTest {&#x000A;    @Deployment(testable = false)&#x000A;    public static WebArchive createDeployment() {&#x000A;        return Deployments.createLoginScreenDeployment();&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Drone&#x000A;    DefaultSelenium browser;&#x000A;}</code></pre>
<p><strong>That&#8217;s it!</strong> The <code>@Drone</code> injection point tells Drone to create an instance of the browser controller, <a href="http://selenium.googlecode.com/svn/tags/selenium-2.5.0/docs/api/java/com/thoughtworks/selenium/DefaultSelenium.html">DefaultSelenium</a>, before the first client test is run, then inject that object into the test case.</p>
<p>Here we&#8217;re using <code>DefaultSelenium</code>, which requires Selenium Server running. However, because we&#8217;ve included the Arquillian Drone integration for Selenium Server, it will be started and the browser will connect to it automatically. <em>Do not pollute your tests with unnecessary code. Keep them simple!</em></p>
<p><strong>Oh wait!</strong> There&#8217;s one more thing. We&#8217;re testing web UI, but how do we know the URL of deployed application? Well, Arquillian already has a solution. Just use <code>@ArquillianResource</code> to inject the URL of the deployed application.</p>
<div class="filename">src/test/java/org/arquillian/example/LoginScreenSeleniumTest.java</div>
<pre class="prettify"><code class="prettify">// clip&#x000A;import java.net.URL;&#x000A;import org.jboss.arquillian.test.api.ArquillianResource;&#x000A;// clip</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class LoginScreenSeleniumTest {&#x000A;    @Deployment(testable = false)&#x000A;    public static WebArchive createDeployment() {&#x000A;        return Deployments.createLoginScreenDeployment();&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Drone&#x000A;    DefaultSelenium browser;</code>&#x000A;&#x000A;<code class="prettify">    @ArquillianResource&#x000A;    URL deploymentURL;&#x000A;}</code></pre>
<p>Now even the URL of your deployed archive is injected in the test. It&#8217;s now time to drive the browser to verify the functionality of the web application.</p>
<h3 id="drive_the_browser">Drive the Browser</h3>
<p>Here&#8217;s the test method that pokes at the login screen to make sure it works. We use an XPath expression to verify that the welcome message appears after a successful login.</p>
<div class="filename">src/test/java/org/arquillian/example/LoginScreenSeleniumTest.java</div>
<pre class="prettify"><code class="prettify">// clip&#x000A;@Test&#x000A;public void should_login_successfully() {&#x000A;    browser.open(deploymentUrl + "login.jsf");</code>&#x000A;&#x000A;<code class="prettify">    browser.type("id=loginForm:username", "demo");&#x000A;    browser.type("id=loginForm:password", "demo");&#x000A;    browser.click("id=loginForm:login");&#x000A;    browser.waitForPageToLoad("15000");</code>&#x000A;&#x000A;<code class="prettify">    Assert.assertTrue("User should be logged in!",&#x000A;        browser.isElementPresent("xpath=//li[contains(text(), 'Welcome')]"));&#x000A;} &#x000A;// clip</code></pre>
<p class="info"><span>The <code>isElementPresent()</code> method in the DefaultSelenium API accepts an XPath expression as a string. Don&#8217;t confuse it with the similarly-named method from the Graphene API that accepts an XPathLocator object.</span></p>
<p>Right click on the test in your IDE and select Run As &gt; JUnit test. Arquillian will boot JBoss AS 7, kick off Selenium, which will launch Firefox (the default) and magically flip through the pages. The result of the test will appear as normal in your JUnit view.</p>
<p><img src="/images/guides/arquillian_drone_tutorial_junit_green_bar.png" alt="" /></p>
<p><strong>Congratulations!</strong> You&#8217;ve just tested that your application login page works correctly in Firefox! <strong class="greenbar">Green bar</strong>!</p>
<p>You can also run the test on the commandline using Maven:</p>
<pre class="command"><code class="command">$ mvn test</code></pre>
<p>You don&#8217;t get a pretty green bar, but you should have seen Firefox flash on the screen, then Maven wrap up with no test failures or errors.</p>
<p>The test works in Firefox, but what about another browser, like Google Chrome? Switching browsers is easy. Extensions like Drone can reserve qualified <code>&lt;extension&gt;</code> elements in the Arquillian configuration descriptor to set options to pass to the underlying tool, in this case Selenium.</p>
<p>Create the Arquillian descriptor, arquillian.xml, under the <code>src/test/resources</code> folder and populate it with the following content. The <code>browser</code> property defined in the <code>&lt;extension&gt;</code> element qualified &#8220;selenium&#8221; instructs Selenium to use Google Chrome when running the tests.</p>
<pre class="prettify"><code class="prettify">&lt;arquillian xmlns="http://jboss.org/schema/arquillian"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://jboss.org/schema/arquillian&#x000A;        http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;&#x000A;    &lt;extension qualifier="selenium"&gt;&#x000A;        &lt;property name="browser"&gt;*googlechrome&lt;/property&gt;&#x000A;    &lt;/extension&gt;&#x000A;&lt;/arquillian&gt; </code></pre>
<p>Now run the tests again. <strong class="greenbar">Green bar</strong>! This time, you&#8217;ll notice that Selenium launched Google Chrome instead of Firefox. Now you&#8217;ve got two browsers covered.</p>
<p class="info"><span>Consult the <a href="http://stackoverflow.com/questions/2569977/list-of-selenium-rc-browser-launchers">Selenium reference</a> for the full set of browser keys that Selenium accepts.</span></p>
<p>Did the test go by too fast? One way to slow it down is to use a breakpoint in the test and run it in debug mode.</p>
<h3 id="pause_the_test">Pause the Test</h3>
<p>If you want to see what&#8217;s happening in the browser while the test is running, one way tap on the breaks is to add a breakpoint to the test and run it in debug mode. Open up the <code>LoginScreenSeleniumTest</code> class and add a breakpoint on the line that performs the click on the login button. Then, right click and select Debug As &gt; JUnit Test. The test should pause when it gets to the breakpoint as shown in the screenshot below:</p>
<p><img src="/images/guides/arquillian_drone_tutorial_debug_test.png" alt="" /></p>
<p>If you switch over to the browser, you should see the browser waiting on the login screen:</p>
<p><img src="/images/guides/arquillian_drone_tutorial_login_screen.png" alt="" /></p>
<p>When you are ready to continue the automation, simply press the continue (play) button in the debugger.</p>
<p>In the real world, you&#8217;re application likely relies on third-party libraries. Let&#8217;s see how to incorporate those into the micro application.</p>
<h3 id="package_libraries">Package Libraries</h3>
<p>The basic scenario we&#8217;ve studied so far simply uses the programming model the platform supplies out of the box (JSF, CDI, etc). Likely, your application will use additional libraries. That means you&#8217;ll need to include them in the test archive. Fortunately, that&#8217;s supported in Arquillian.</p>
<p>We&#8217;ll use the ShrinkWrap Maven Resolver to resolve artifacts from a remote repository so they can be packaged in the test archive. First, you need to define this library in the <code>&lt;dependencies&gt;</code> section of the Maven pom.xml.</p>
<div class="filename">pom.xml</div>
<pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.shrinkwrap.resolver&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;shrinkwrap-resolver-impl-maven&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
<p>Let&#8217;s assume that we want to use the injectable logger provided by <a href="http://sfwk.org/Seam3/Solder">Solder</a>. Naturally, we&#8217;ll need to define that library in the <code>&lt;dependencies&gt;</code> section of the Maven pom.xml as well:</p>
<div class="filename">pom.xml</div>
<pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.seam.solder&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;seam-solder&lt;/artifactId&gt;&#x000A;    &lt;version&gt;3.0.0.Final&lt;/version&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
<p>We can now inject a logger into the <code>LoginController</code> to write messages to the log file.</p>
<div class="filename">src/main/java/org/arquillian/example/LoginController.java</div>
<pre class="prettify"><code class="prettify">package org.arquillian.example;&#x000A;// clip&#x000A;import org.jboss.logging.Logger;&#x000A;// clip</code>&#x000A;&#x000A;<code class="prettify">@Named&#x000A;@SessionScoped&#x000A;public class LoginController implements Serializable {&#x000A;    // clip&#x000A;    @Inject&#x000A;    private Logger logger;&#x000A;    // clip</code>&#x000A;&#x000A;<code class="prettify">    public String login() {&#x000A;        if ("demo".equals(credentials.getUsername()) &amp;&amp;&#x000A;            "demo".equals(credentials.getPassword())) {&#x000A;            currentUser = new User("demo");&#x000A;            logger.info(currentUser.getUsername() + " has signed in.");&#x000A;            FacesContext.getCurrentInstance().addMessage(null,&#x000A;                new FacesMessage(SUCCESS_MESSAGE));&#x000A;            return "home.xhtml";&#x000A;        }</code>&#x000A;&#x000A;<code class="prettify">        FacesContext.getCurrentInstance().addMessage(null,&#x000A;            new FacesMessage(FacesMessage.SEVERITY_WARN,&#x000A;                FAILURE_MESSAGE, FAILURE_MESSAGE));&#x000A;        return null;&#x000A;    }&#x000A;    // clip&#x000A;}</code></pre>
<p>If you tried to run the test now, it would fail because the Solder library is not packaged in the test archive. This isolation is important because it gives us a true picture of how the application behaves in isolation from the project&#8217;s classpath.</p>
<p>We&#8217;ll now add this library to the test archive using the <code>MavenDependencyResolver</code> in the <code>Deployments</code> utility class:</p>
<pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.File;</code>&#x000A;&#x000A;<code class="prettify">import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.asset.StringAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.WebArchive;&#x000A;import org.jboss.shrinkwrap.resolver.api.DependencyResolvers;&#x000A;import org.jboss.shrinkwrap.resolver.api.maven.MavenDependencyResolver;</code>&#x000A;&#x000A;<code class="prettify">public class Deployments {&#x000A;    private static final String WEBAPP_SRC = "src/main/webapp";</code>&#x000A;&#x000A;<code class="prettify">    public static WebArchive createLoginScreenDeployment() {&#x000A;        MavenDependencyResolver resolver = DependencyResolvers&#x000A;            .use(MavenDependencyResolver.class)&#x000A;            .loadMetadataFromPom("pom.xml");</code>&#x000A;&#x000A;<code class="prettify">        return ShrinkWrap.create(WebArchive.class, "login.war")&#x000A;            .addClasses(Credentials.class, User.class, LoginController.class)&#x000A;            .addAsLibraries(resolver&#x000A;                .artifact("org.jboss.seam.solder:seam-solder")&#x000A;                .resolveAsFiles())&#x000A;            .addAsWebResource(new File(WEBAPP_SRC, "login.xhtml"))&#x000A;            .addAsWebResource(new File(WEBAPP_SRC, "home.xhtml"))&#x000A;            .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml")&#x000A;            .addAsWebInfResource(&#x000A;                new StringAsset("&lt;faces-config version=\"2.0\"/&gt;"),&#x000A;                "faces-config.xml");&#x000A;    }&#x000A;    // clip &#x000A;}</code></pre>
<p>The <code>MavenDependencyResolver</code> is configured to use the metadata (repositories and dependency versions) defined in the project&#8217;s pom.xml file. To grab a library, you simply specify a groupId and artifactId using the shorthand syntax, in this case <code>org.jboss.seam.solder:seam-solder</code>. The ShrinkWrap Maven Resolver will use <a href="http://aether.sonatype.org">Aether</a> to search the local Maven repository and, if required, the remote repositories. It will resolve Solder as well as its non-optional transitive dependencies. Those JAR files are then packaged in WEB-INF/lib directory of the test archive by ShrinkWrap.</p>
<p>Run the test again. <strong class="greenbar">Green bar</strong>!</p>
<p><em>Arquillian makes integration testing a breeze. Arquillian Drone adds a great support for functional tests. Together, they make developing tests fun again.</em></p>
  <h3 id="share">Share the Knowledge</h3>
  <p>Find this guide useful?</p>
  <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Functional%20Testing%20using%20Drone%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/functional_testing_using_drone/"><img src="/images/post_to_twitter.png" alt="" /></a></p>
  <div class="g-plusone" data-size="tall"></div>
  <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
  <h4>Feedback</h4>
  <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
  <h4>Recent Changelog</h4>
  <ul>
    <li>
      May 24, 2012:
      Upgrade to arquillian 1.0.0.final; use proper content for faces-config.xml
      <em>by Dan Allen</em>
    </li>
    <li>
      May 17, 2012:
      Document how to use explodedimporter to add web templates to archive
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 16, 2012:
      Open login.jsf instead of home.jsf in loginscreenseleniumtest
      <em>by Robin Roestenburg</em>
    </li>
    <li>
      Apr 09, 2012:
      Fix reference to @runasclient
      <em>by Ken Finnigan</em>
    </li>
    <li>
      Apr 08, 2012:
      Replace reference to ajocado with graphene
      <em>by Dan Allen</em>
    </li>
    <li>
      Apr 05, 2012:
      Use description in prolog for guide summary
      <em>by Dan Allen</em>
    </li>
    <li>
      Feb 26, 2012:
      Clarify selenium apis in use, add link to javadoc, upgrade library versions
      <em>by Dan Allen</em>
    </li>
    <li>
      Feb 10, 2012:
      Identify authors &amp; translators by site identity
      <em>by Dan Allen</em>
    </li>
    <li>
      Jan 30, 2012:
      Drop arquillian from title
      <em>by Dan Allen</em>
    </li>
    <li>
      Nov 29, 2011:
      Improved jpa tutorial and adjusted it to the arquillian-showcase
      <em>by Bartosz Majsak</em>
    </li>
    <li>
      Nov 13, 2011:
      Exclude servlet 2.5 api from selenium-server dependency
      <em>by Dan Allen</em>
    </li>
    <li>
      Nov 04, 2011:
      Add changelog to guides, revert to static author list
      <em>by Dan Allen</em>
    </li>
    <li>
      Oct 26, 2011:
      Add page_authors(page) method to awestruct::extension::guide
      <em>by Aslak Knutsen</em>
    </li>
    <li>
      Oct 25, 2011:
      Move guide header wrapper into extension; notes
      <em>by Dan Allen</em>
    </li>
    <li>
      Oct 16, 2011:
      New guides, fix to guide toc, ref doc links, notes
      <em>by Dan Allen</em>
    </li>
  </ul>
  <p>
    <a href="https://github.com/arquillian/arquillian.github.com/commits/develop/guides/functional_testing_using_drone.textile">See full history &raquo;</a>
  </p>
</div>
<div id="sidebar">
  <div id="toc">
    <h3 class="chapter_header">Chapters</h3>
    <ol class="chapters">
      <li>
        <a href="#assumptions" id="assumptions_link">Assumptions</a>
      </li>
      <li>
        <a href="#introducing_client_mode" id="introducing_client_mode_link">Introducing Client Mode</a>
      </li>
      <li>
        <a href="#enabling_client_mode" id="enabling_client_mode_link">Enabling Client Mode</a>
      </li>
      <li>
        <a href="#drone_overview" id="drone_overview_link">Drone Overview</a>
      </li>
      <li>
        <a href="#set_up_drone" id="set_up_drone_link">Set Up Drone</a>
      </li>
      <li>
        <a href="#create_a_login_screen" id="create_a_login_screen_link">Create a Login Screen</a>
      </li>
      <li>
        <a href="#create_a_test_archive" id="create_a_test_archive_link">Create a Test Archive</a>
      </li>
      <li>
        <a href="#inject_the_selenium_driver" id="inject_the_selenium_driver_link">Inject the Selenium Driver</a>
      </li>
      <li>
        <a href="#drive_the_browser" id="drive_the_browser_link">Drive the Browser</a>
      </li>
      <li>
        <a href="#pause_the_test" id="pause_the_test_link">Pause the Test</a>
      </li>
      <li>
        <a href="#package_libraries" id="package_libraries_link">Package Libraries</a>
      </li>
      <li>
        <a href="#share" id="share_link">Share the Knowledge</a>
      </li>
    </ol>
  </div>
</div>
<script>
  $(window).load(function() { activateScrollingToc(['assumptions', 'introducing_client_mode', 'enabling_client_mode', 'drone_overview', 'set_up_drone', 'create_a_login_screen', 'create_a_test_archive', 'inject_the_selenium_driver', 'drive_the_browser', 'pause_the_test', 'package_libraries', 'share']) })
</script>
  </div>
</div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2009-2012 Red Hat, Inc.
            <br />
            <i class="icon-fire"></i>
            Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon-share-alt"></i>
            Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            <br />
            Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
            <li>
              <a href="http://community.jboss.org/en/arquillian/faq">FAQs</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="https://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
            <li>
              <a href="https://community.jboss.org/groups/testing">Testing SIG</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow Arquillian on Google+" /></a>
              </li>
              <li>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #arquillian hashtag on Twitter" /></a>
              </li>
              <li>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the Arquillian group on LinkedIn" /></a>
              </li>
              <li>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the Arquillian channel on Vimeo" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! You can also <a href="http://www.seethestats.com/site/arquillian.org">see the stats</a>. If you want to help, <a href="http://github.com/arquillian/arquillian.github.com">fork the project</a> and hack on it.</p>
          <p class="image"><a href="http://jboss.org"><img src="/images/jboss_redhat_branding.png" class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." /></a></p>
          <p>Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
          <p class="bottom"><a href="http://www.redhat.com/legal/legal_statement.html">Terms of Use</a> | <a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a></p>
        </div>
        <a class="visible-desktop" href="#" id="toTop">Top</a>
      </div>
    </footer>
    <script>
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script src="/javascripts/site.js"></script>
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
  </body>
</html>
